{% extends "support/base.html" %}
{% block title %}Meeting Details{% endblock %}
{% block content %}
<div class="max-w-2xl mx-auto bg-white shadow rounded-lg p-6 fade-in">
    <h2 class="text-2xl font-bold mb-4 text-green-600">{{ meeting.title }}</h2>
    <p><strong>Teacher:</strong> {{ meeting.teacher.username }}</p>
    <p><strong>Start Time:</strong> {{ meeting.start_time }}</p>
    <p><strong>Duration:</strong> {{ meeting.duration_minutes }} mins</p>
    <p><strong>Meeting Link:</strong> <a href="{{ meeting.meeting_link }}" target="_blank" class="text-blue-700 underline">Join Link</a></p>

    <hr class="my-4">

    {% if ticket %}
        <p class="mb-2">Your submitted problem:</p>
        <div class="p-3 bg-gray-100 rounded mb-3">{{ ticket.problem_text }}</div>
        <p>Your serial number: #{{ ticket.serial_number }}</p>
        {% if ticket.status == 'waiting' %}
            <p>Students ahead of you: {{ student_position }}</p>
            <button class="mt-2 bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition-all">Check Position</button>
        {% elif ticket.status == 'joined' %}
            <a href="{{ meeting.meeting_link }}" target="_blank" class="mt-2 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-all">Join Meeting</a>
        {% endif %}
    {% else %}
        <h3 class="text-lg font-semibold mb-2 text-blue-600">Submit Your Problem</h3>
        <form method="POST">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-all">Submit Problem</button>
        </form>
    {% endif %}
</div>
{% endblock %}
